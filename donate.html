<!DOCTYPE html>
<!-- StreamSuites - Public Donation Page -->
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Support StreamSuites</title>
  <meta name="description" content="Make an optional, one-time donation to support StreamSuites." />
  <link rel="canonical" href="https://streamsuites.app/donate.html" />
  <meta property="og:title" content="Support StreamSuites" />
  <meta property="og:description" content="Make an optional, one-time donation to support StreamSuites." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://streamsuites.app/donate.html" />
  <meta property="og:image" content="/assets/backgrounds/seoshare.jpg" />
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="/css/theme-dark.css" />
  <link rel="stylesheet" href="/css/components.css" />
  <link rel="stylesheet" href="/css/public-pages.css" />
</head>
<body>
  <div class="public-bg" aria-hidden="true"></div>
  <div class="public-surface">
    <div class="public-shell">
      <header class="public-topbar">
        <a class="public-brand" href="/">
          <img src="/assets/logos/logo.png" alt="StreamSuites" />
          <div>
            <h1>StreamSuites</h1>
            <p class="brand-subtitle">Public surface</p>
          </div>
        </a>
        <div class="public-nav-wrapper">
          <input type="checkbox" id="public-nav-toggle" class="nav-toggle" aria-label="Toggle navigation" />
          <label class="hamburger" for="public-nav-toggle">
            <span class="sr-only">Toggle navigation</span>
            <svg viewBox="0 0 32 32" aria-hidden="true">
              <path class="line line-top-bottom" d="M27 10 13 10C10.8 10 9 8.2 9 6 9 3.5 10.8 2 13 2 15.2 2 17 3.8 17 6L17 26C17 28.2 18.8 30 21 30 23.2 30 25 28.2 25 26 25 23.8 23.2 22 21 22L7 22"></path>
              <path class="line" d="M7 16 27 16"></path>
            </svg>
          </label>
          <div class="public-nav">
            <span class="version-pill version-badge">Loading version...</span>
            <a href="/about.html">About</a>
            <a href="/tools.html">Tools</a>
            <a href="/support.html">Support</a>
            <a href="/privacy.html">Privacy</a>
            <a href="/changelog.html">Changelog</a>
            <a href="/accessibility.html">Accessibility</a>
          </div>
        </div>
      </header>

      <section class="public-hero public-glass-panel">
        <div class="section-heading">
          <h2>Support StreamSuites</h2>
          <span class="public-badge">Public surface</span>
        </div>
        <p class="muted">StreamSuites stays focused on creators, fast public tools, and an ad-free experience. If you would like to help, you can make a voluntary one-time donation.</p>
      </section>

      <section class="public-stack" aria-label="Donation options">
        <article class="public-glass-card" id="donate">
          <h3>One-time donation</h3>
          <p class="muted">Your support helps us keep StreamSuites reliable and continuously improving for the community.</p>
          <div class="hero-actions donate-actions">
            <button class="cta-link donate-option" type="button" data-amount="5">$5</button>
            <button class="cta-link donate-option" type="button" data-amount="10">$10</button>
            <button class="cta-link donate-option" type="button" data-amount="25">$25</button>
          </div>
          <div class="donate-custom">
            <label class="sr-only" for="donate-custom-amount">Custom amount</label>
            <input id="donate-custom-amount" type="number" min="1" step="1" inputmode="decimal" placeholder="Custom amount (USD)" />
            <button class="cta-link donate-option" type="button" data-action="custom">Donate custom amount</button>
          </div>
          <p class="helper-text">Donations are optional and never required to use StreamSuites.</p>
          <p class="helper-text donate-error" role="alert" hidden>Sorry, we couldn't start the donation checkout. Please try again in a moment.</p>
        </article>
      </section>

      <footer class="public-footer">
        <div>
          <span class="footer-version">Version</span>
          <span class="footer-copyright">(c)</span>
        </div>
        <nav aria-label="Public footer navigation">
          <a href="/about.html">About</a>
          <a href="/tools.html">Tools</a>
          <a href="/support.html">Support</a>
          <a href="/donate.html">Donate</a>
          <a href="/privacy.html">Privacy</a>
          <a href="/changelog.html">Changelog</a>
          <a href="/accessibility.html">Accessibility</a>
        </nav>
      </footer>
    </div>
  </div>

  <script src="/js/utils/versioning.js"></script>
  <script src="/js/utils/version-stamp.js"></script>
  <script>
    (function () {
      var donateCard = document.querySelector(".public-glass-card#donate");
      if (!donateCard) {
        return;
      }

      var statusMessage = donateCard.querySelector(".donate-error");
      var presetButtons = donateCard.querySelectorAll(".donate-option[data-amount]");
      var customButton = donateCard.querySelector(".donate-option[data-action=\"custom\"]");
      var customInput = donateCard.querySelector("#donate-custom-amount");

      var endpoint = "https://api.streamsuites.app/billing/donate/session";

      function setStatusMessage(message) {
        if (!statusMessage) {
          return;
        }
        statusMessage.textContent = message;
        statusMessage.hidden = false;
      }

      function setBusyState(isBusy, activeButton, label) {
        var buttons = donateCard.querySelectorAll(".donate-option");
        buttons.forEach(function (button) {
          if (!button.dataset.label) {
            button.dataset.label = button.textContent;
          }
          button.disabled = isBusy;
          if (button === activeButton) {
            button.setAttribute("aria-busy", isBusy ? "true" : "false");
            button.textContent = isBusy ? label : button.dataset.label;
          } else if (!isBusy) {
            button.textContent = button.dataset.label;
            button.removeAttribute("aria-busy");
          }
        });
        if (customInput) {
          customInput.disabled = isBusy;
        }
      }

      function startDonation(amount, activeButton) {
        setBusyState(true, activeButton, "Redirecting...");
        if (statusMessage) {
          statusMessage.hidden = true;
        }

        fetch(endpoint, {
          method: "POST",
          headers: {
            "Accept": "application/json",
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            amount: amount,
            source: "public"
          })
        })
          .then(function (response) {
            if (!response.ok) {
              throw new Error("Donation request failed.");
            }
            return response.json();
          })
          .then(function (data) {
            if (!data || typeof data.checkout_url !== "string" || !data.checkout_url.length) {
              throw new Error("Donation session was not returned.");
            }
            window.location.assign(data.checkout_url);
          })
          .catch(function () {
            setBusyState(false);
            setStatusMessage("Sorry, we couldn't start the donation checkout. Please try again in a moment.");
          });
      }

      presetButtons.forEach(function (button) {
        button.addEventListener("click", function () {
          var amount = Number(button.dataset.amount);
          if (!Number.isFinite(amount) || amount <= 0) {
            setStatusMessage("Please choose a valid donation amount.");
            return;
          }
          startDonation(amount, button);
        });
      });

      if (customButton && customInput) {
        customButton.addEventListener("click", function () {
          var amount = Number(customInput.value);
          if (!Number.isFinite(amount) || amount <= 0) {
            setStatusMessage("Please enter a valid donation amount.");
            return;
          }
          startDonation(amount, customButton);
        });
      }
    })();
  </script>
  <script src="https://streamsuites.statuspage.io/embed/script.js"></script>
</body>
</html>
